[{"/Users/akramnour/monk-underground-1/src/index.js":"1","/Users/akramnour/monk-underground-1/src/App.js":"2","/Users/akramnour/monk-underground-1/src/exportAsImage.js":"3","/Users/akramnour/monk-underground-1/src/App.test.js":"4"},{"size":323,"mtime":1665524607526,"results":"5","hashOfConfig":"6"},{"size":7179,"mtime":1665526448891,"results":"7","hashOfConfig":"6"},{"size":1216,"mtime":1665524607485,"results":"8","hashOfConfig":"6"},{"size":246,"mtime":1665524607447,"results":"9","hashOfConfig":"6"},{"filePath":"10","messages":"11","suppressedMessages":"12","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"pd4mvi",{"filePath":"13","messages":"14","suppressedMessages":"15","errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"16"},{"filePath":"17","messages":"18","suppressedMessages":"19","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"20","messages":"21","suppressedMessages":"22","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/akramnour/monk-underground-1/src/index.js",[],[],"/Users/akramnour/monk-underground-1/src/App.js",["23","24","25","26","27","28","29"],[],"import { useEffect, useState, useRef } from 'react';\nimport axios from 'axios';\nimport './App.css';\nimport image from './tapped_in_fasho.jpg';\nimport image2 from './not_tapped_in.jpg';\nimport image3 from './bro.jpg';\nimport exportAsImage from \"./exportAsImage\";\n\n\n\nfunction App() {\n\n    const exportRef = useRef();\n    const CLIENT_ID = \"d0db6dd1a5ef4b7f8a493a84259ae21c\"\n    const REDIRECT_URI = \"http://monkunderground.com\"\n    const AUTH_ENDPOINT = \"https://accounts.spotify.com/authorize\"\n    const RESPONSE_TYPE = \"token\"\n    const SCOPE = \"user-top-read\"\n\n    const [ token, setToken ] = useState(\"\");\n    const [artists, setArtists] = useState([]);\n    const [obscure, setObscure] = useState([]);\n    const [lowID, setLowID] = useState(\"\");\n    const [artistsFound, setArtistsFound] = useState(false);\n    const [idFound, setIDFound] = useState(false);\n    const [obscureFound, setObscureFound] = useState(false);\n\n    //let lowName = \"\"; //for debugging\n    //let lowID = \"\"; //for get artist endpoint\n    let ignore = false; //don't call useeffect functions when it's true\n    //let artistsFound = false;\n    //let idFound = false;\n\n    useEffect( () => {\n        const hash = window.location.hash;\n        let token = window.localStorage.getItem(\"token\"); //localstorage allows us to store key value pairs even after window is closed\n\n        if (!token && hash) { //token is empty and hash is assigned a value\n            token = hash.substring(1).split(\"&\").find(elem => elem.startsWith(\"access_token\")).split(\"=\")[1]; //& means take everything before the &, [1] means take the second part of the split\n            //console.log(token);\n            window.location.hash = \"\"; //make it empty again (WHY?)\n            window.localStorage.setItem(\"token\", token);\n        }\n\n        setToken(token);\n        //console.log(token);\n\n    }, []);\n\n    const logout = () => {\n        setToken(\"\");\n        window.localStorage.removeItem(\"token\");\n    }\n\n    useEffect(() => {\n        if (token){\n            const getTopArtists = async () => {\n                try {\n                    const {data} = await axios.get(\"https://api.spotify.com/v1/me/top/artists\", {\n                        headers: {\n                            Authorization: `Bearer ${token}`\n                        },\n                        params: {\n                            limit: 25, \n                            time_range: \"medium_term\"\n                        }\n                    })\n                    //console.log(data);\n                    setArtists(data.items);\n                    setArtistsFound(true);\n                }\n                catch {\n                    logout(); //logs you out if token expired\n                }\n            };\n            getTopArtists();\n            //ignore = true; //JUST FOR NOW, REMOVE WHEN GETOBSCURE ARTIST IS DONE\n        }\n    }, [token]);\n\n    useEffect(() => {\n        if (artistsFound) {\n            let lowScore = 101;\n            const getLowID = () => {\n                //console.log(\"GET LOW ID called\");\n                //console.log(artists);\n                artists.map(getLowScore); //does this for each item\n                function getLowScore(item) {\n                    if (item.popularity < lowScore) {\n                                lowScore = item.popularity;\n                                //console.log(lowScore);\n                                //lowName = item.name;\n                                setLowID(item.id);\n                            }\n                        }\n                //console.log(lowName);\n                //console.log(100 - lowScore); //undrgrnd score\n                setIDFound(true);\n            };\n            getLowID();\n        }\n    }, [artistsFound, artists]);\n\n    useEffect(() => {\n        if (idFound){\n            const getObscureArtist = async () => {\n                const {data} = await axios.get(`https://api.spotify.com/v1/artists/${lowID}`, {\n                        headers: {\n                            Authorization: `Bearer ${token}`\n                        }\n                    })\n                    setObscure(data);\n                    setObscureFound(true);\n                    //console.log(obscure);\n                };\n            getObscureArtist();\n            //ignore = true;\n        }\n    }, [idFound, lowID, token]);\n\n    useEffect(() => { //TESTING\n        console.log(obscure);\n\n    }, [obscureFound, obscure]);\n\n\n    const renderObscure = () => {\n        if (obscure.length != 0){\n            let imagePath = './bro.jpg';\n            if (obscure.popularity <= 50){\n                imagePath = './tapped_in_fasho.jpg';\n            }\n            else if (obscure.popularity <= 75){\n                imagePath = './not_tapped_in.jpg';\n                \n            }\n\n        return (\n\n                    <div id=\"myartist\" className='headtext'>\n                        <div ref={exportRef} className='headimage' key={obscure.id}>\n                            <img src={require(`${imagePath}`)} alt=\"My Top Underground Artist\" /> <img/>\n                                    <div className=\"artistname\">\n                                        {obscure.name}\n                                    </div>\n                                <div className = \"scorebox\">  \n                                    <div className='score'>\n                                     {100 - obscure.popularity + \"%\"}  \n                                    </div>  \n                                </div>      \n                                                 \n                                {obscure.images.length ? <img className='artistcover' width={\"30%\"} src={obscure.images[0].url} alt=\"\"/> : <div>No Image</div>}\n                                        \n                        </div>\n                        <div className = \"smalltext\">\n                            <p>Music data, artist images, and album covers are provided by Spotify.</p><p> monk:underground is not affiliated, associated, authorized, endorsed by,or in any way officially connected with Spotify. Spotify is a trademark of Spotify AB.</p>  \n                        </div>   \n                    </div>\n            )\n        }\n          \n    }\n\n    return (\n        <div className=\"App\">\n            \n            <header className=\"App-header\">\n                    <h1>\n                        monk<span className='smaller'>:underground</span>\n                    </h1>\n                        {!token ?\n                        <a href={`${AUTH_ENDPOINT}?client_id=${CLIENT_ID}&redirect_uri=${REDIRECT_URI}&response_type=${RESPONSE_TYPE}&scope=${SCOPE}`}>LOGIN TO SPOTIFY</a>\n                        :\n                        <div>\n                            <button className='logout' onClick={logout}> LOGOUT </button>\n                            {/* <button className='save' onClick={() => exportAsImage(exportRef.current, \"My Top Underground Artist\")}>SAVE</button> */}\n                        </div>\n                        }\n            </header>  \n\n            <body>       \n                            {renderObscure()}           \n            </body>    \n\n        </div>\n    );\n}\n\nexport default App;  ","/Users/akramnour/monk-underground-1/src/exportAsImage.js",[],[],"/Users/akramnour/monk-underground-1/src/App.test.js",[],[],{"ruleId":"30","severity":1,"message":"31","line":4,"column":8,"nodeType":"32","messageId":"33","endLine":4,"endColumn":13},{"ruleId":"30","severity":1,"message":"34","line":5,"column":8,"nodeType":"32","messageId":"33","endLine":5,"endColumn":14},{"ruleId":"30","severity":1,"message":"35","line":6,"column":8,"nodeType":"32","messageId":"33","endLine":6,"endColumn":14},{"ruleId":"30","severity":1,"message":"36","line":7,"column":8,"nodeType":"32","messageId":"33","endLine":7,"endColumn":21},{"ruleId":"30","severity":1,"message":"37","line":30,"column":9,"nodeType":"32","messageId":"33","endLine":30,"endColumn":15},{"ruleId":"38","severity":1,"message":"39","line":128,"column":28,"nodeType":"40","messageId":"41","endLine":128,"endColumn":30},{"ruleId":"42","severity":1,"message":"43","line":142,"column":99,"nodeType":"44","endLine":142,"endColumn":105},"no-unused-vars","'image' is defined but never used.","Identifier","unusedVar","'image2' is defined but never used.","'image3' is defined but never used.","'exportAsImage' is defined but never used.","'ignore' is assigned a value but never used.","eqeqeq","Expected '!==' and instead saw '!='.","BinaryExpression","unexpected","jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","JSXOpeningElement"]